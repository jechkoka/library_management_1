<%# app/views/loans/confirm_return.html.erb %>
<div class="page-header">
  <h1>Confirmer le retour</h1>
</div>

<div class="confirm-return">
  <p>Êtes-vous sûr de vouloir marquer ce livre comme retourné ?</p>
  
  <div class="loan-details">
    <p><strong>Livre:</strong> <%= @loan.book.title %></p>
    <p><strong>Auteur:</strong> <%= @loan.book.author %></p>
    <p><strong>Emprunté par:</strong> <%= @loan.user.full_name %></p>
    <p><strong>Emprunté le:</strong> <%= @loan.borrowed_on.strftime("%d/%m/%Y") %></p>
    <p><strong>Date de retour prévue:</strong> <%= @loan.due_date.strftime("%d/%m/%Y") %></p>
    <p>
      <strong>Statut:</strong> 
      <% if Date.today > @loan.due_date %>
        <span class="overdue">En retard</span>
      <% else %>
        En cours
      <% end %>
    </p>
  </div>
  
  <div class="actions">
    <%= form_with(url: return_book_path(@loan), method: :patch) do %>
      <%= submit_tag "Confirmer le retour", class: "button return" %>
    <% end %>
    
    <%= link_to "Annuler", loans_path, class: "button back" %>
  </div>
</div>